# How to Exploit
___

There are 5 types to cover.
1. Error based SQLI
2. Union based SQLI
3. Boolean/Blind based SQLI
4. Blind/Blind based SQLI
5. Out of Ban based SQLI
___
### Error based SQLI
- Submit SQL specific characters such as *__'__* or *__"__* to invoke an error. Different characters can give you different error, use different SQL based characters to fuzz.

### Union based SQLI
- For combining the result sets of two queries, there are two rules for using UNION
    1. The number and order of the columns must be the same in all queries
    2. Data types must be compatible.
    >The Application and our query must satisfy these two rules

- Exploitation
    1. Figure out the number of columns that the query is making.
        >1. Determine the number of columns in a UNION injection attack using *__ORDER BY:__*
        ```SQL
        SELECT title, cost FROM product WHERE id = 1 ORDER BY 1
        ```
        Inject a series of *__order by__* clauses until you get an error or some different behaviour.
        eg.
        ```SQL
        ORDER BY 1--
        ORDER BY 2--
        ORDER BY 3--
        ```
        order by 3 doesn't exist because there is only title and cost in the query. Will give an error something like `The ORDER BY position number 3 is out of range of the number of items in the select list`

        >2. Determine the number of columns in a UNION injection attack using *__NULL__* values.
        ```SQL
            SELECT title, cost FROM product WHERE id = 1 UNION SELECT NULL--
        ```
        Inject a series of *__ UNION SELECT NULL__* payloads specifying a different number of *__NULL__* values until you don't get any errors.
        ```SQL
            'UNION SELECT NULL--
        ```
        With only one NULL value in this example will throw an error something like this `All queries combined using a UNION, INTERSECT or EXECPT operator must have an equal amount of expressions in their target lists`
        ```SQL
            'UNION SELECT NULL,NULL--
        ```
        Because there is the same amount of values as in the query and DB this will give no error.

    2. Figure out the data types of the columns(__Interested in Strings__)
        >1. Probe each column to test whether it holds string data by submitting a series of *__UNION SELECT__* payloads that place a string value in each column in turn.
        ```SQL
        'UNION SELECT 'abcdef',NULL--
        ```
        If an output error is given it may look like this. `Conversion failed when converting the varchar value 'a' to data type int`
        ```sql
        'UNION SELECT NULL,'abcdef'--
        ```
        Change it around to check all fields.
        >2. If you can get access to the columns that contain a data type of string then use the *__UNION__* operator to output the information from the database.

### Boolean based Blind  SQLI
- Submit a Boolean condition that tests if True or False and note the response
    1. Test if the condition is false by passing it a condition that will evaluate to false and note the response.
    2. Test if the condition is true by passing it a condition that will evaluate to true and note the response
    > Write a query that asks whether its true or false.

### Time based Injection.
- Submit a payload that pauses the application for a specific amount of time.
> If the application does pause then there is a chance it is vulnerable.
    1. Write a program with a payload that tests true and false monitoring the response time.
    If thre is a delay in the response time then the test is true, if there is no delay then it is false.

    TODO: Need to find out more info on this!!!!!!!!!


### Out of Band SQLI
- This is a vulnerability that triggers an out of band network connection.
    1. Submit a payload designed to trigger an OOB network interaction when executed within an SQL query.
    Monitor the resulting interactions from a server you control. This is databse specific so knowing the type of database would come in handy.
    2. Depending on the SQLI use different methods to exfiltrate data.
    3. Also could be up against Tru and False types.
